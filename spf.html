<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="./img/logo_nav.png">
    <meta http-equiv="refresh" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/spf.css">
    <title>Phirus</title>
</head>

<body>
    <nav>
        <div class="logo_navbar_home">
            <a href="index.php">
                <img class="logo_img" src="./img/logo_nav.png" alt="logo_icon"></a>
            <a class="logo_text" href="index.php">Phirus</a>
        </div>
        <ul class="links">
            <a class="li" href="home.php">
                <li>Home</li>
            </a>
            <a class="li" href="features.html">
                <li>Features</li>
            </a>
            <a class="li" href="#">
                <li>Pro</li>
            </a>
            <a class="li" href="#footer">
                <li>About us</li>
            </a>
        </ul>
        <div class="links_navbar">
            <a class="login_nav" href="login.php">Login</a>
            <a class="signup_nav" href="signup.php">Sign up</a>
        </div>
    </nav>

    <div class="hero_section">
        <h1 class="section_1_h1"> How do yo want to scan your E-mail ?</h1>
        <div class="text_and_img">
            <p class="text_p_1">
                Now , you can scan your e-mail and be<br>
                sure that your e-mail isn’t phishing or<br>
                malicious with some Primary features<br>
                and every primary feature has some sub<br>
                features
            </p>
            <img class="image_section_1" src="./img/features_1.svg" alt="image">
        </div>
    </div>

    <div class="section_2">
        <h1 class="section_2_h1">
            Checking the Header of your<br> E-mail
        </h1>
        <div class="image_section_2">
            <div class="img_features_1">
                <a href="#">
                    <img src="./img/image 3.svg" alt="image" />
                    <p>Header</p>
                </a>
            </div>
            <div class="img_features_2">
                <a href="Body.html">
                    <img src="./img/image 2.svg" alt="image" />
                    <p>Body</p>
                </a>
            </div>
        </div>
    </div>

    <div id="section_spf" class="section_spf">
        <h1 class="section_4_h1">
            How do you want to scan your E-MailHeader ?
        </h1>
        <div class="three">
            <a id="but_5" class="but_5" href="features.html">Whois lookup</a>
            <a class="but_6" href="">SPF & DMARK & DKIM Check</a>
        </div>
        <div class="four">
            <a class="but_7" href="domain.html">Check domain in Black List</a>
            <a class="but_8" href="extract.html">Extract Header Information</a>
        </div>
    </div>

    <div id="check_SPF" class="check_SPF">
        <h1 class="section_5_h1">SPF & DMARK & DKIM Check</h1>
        <div class="SPF_box">
            <input id="domainInput" class="check_box" required type="text" placeholder="Input Domain Name....">
            <p><button type="submit" id="button_SPF" class="button_SPF">Check</button></p>
        </div>
    </div>

    <div class="container_three_features">
        <div class="container_spf">
            <h1 class="h1_spf">SPF</h1>
            <p class="spf_1">
                <strong class="strong_spf_1">Status</strong><span class="span_spf_1" id="status">Fail</span>
                <img class="icon_spf_1" src="./img/Vector (2).svg" alt="">
            </p>
            <p class="spf_2">
                <strong class="strong_spf_2">Mail From</strong><span class="span_spf_2" id="mail_from">Phishing.com</span>
            </p>
            <p class="spf_3">
                <strong class="strong_spf_3">Authorized</strong><span class="span_spf_3" id="authorized">No</span>
            </p>
            <p class="spf_4">
                <strong class="strong_spf_4">Comment</strong><span class="span_spf_4" id="comment">SPF Validation Failed</span>
            </p>
        </div>

        <div class="container_dmarc">
            <h1 class="h1_dmarc">DMARC</h1>
            <p class="Dmarc_1">
                <strong class="strong_dmarc_1">Status</strong><span class="span_dmarc_1" id="dmarc_status">Safe</span>
                <img class="icon_dmarc_1" src="./img/Vector (3).svg" alt="">
            </p>
            <p class="Dmarc_2">
                <strong class="strong_dmarc_2">Policy</strong><span class="span_dmarc_2" id="policy">Reject</span>
            </p>
            <p class="Dmarc_3">
                <strong class="strong_dmarc_3">Alignment</strong><span class="span_dmarc_3" id="alignment">Failed</span>
            </p>
            <p class="Dmarc_4">
                <strong class="strong_dmarc_4">Comment</strong><span class="span_dmarc_4" id="dmarc_comment">
                DMARC Validation Failed<br>
                Policy Applied: Reject<br>
                Domain Alignment: Failed
            </span>
            </p>
        </div>

        <div class="container_dkim">
            <h1 class="h1_dkim">DKIM</h1>
            <p class="Dkim_1">
                <strong class="strong_dkim_1">Status</strong><span class="span_dkim_1" id="dkim_status">Safe</span>
                <img class="icon_dkim_1" src="./img/Vector (3).svg" alt="">
            </p>
            <p class="Dkim_2">
                <strong class="strong_dkim_2">Signing Domain</strong><span class="span_dkim_2" id="dkim_domain"><a href="#">malicious.com</a></span>
            </p>
            <p class="Dkim_3">
                <strong class="strong_dkim_3">Header Integrity</strong><span class="span_dkim_3" id="dkim_integrity">Possibly Altered</span>
            </p>
            <p class="Dkim_4">
                <strong class="strong_dkim_4">Comment</strong><span class="span_dkim_4" id="dkim_comment">
                DKIM Validation Failed<br>
                Email signed by <a href="#">malicious.com</a><br>
                Header Integrity: Possibly Altered
            </span>
            </p>
        </div>
    </div>

    <script>
        document.getElementById("button_SPF").addEventListener("click", function(event) {
    event.preventDefault(); // Prevent form submission

    const domainName = document.getElementById("domainInput").value;
    if (domainName === "") {
        alert("Please enter a domain name.");
        return;
    }

    fetch("https://web-production-98be.up.railway.app/spfdmarc", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({ domain: domainName }),
    })
        .then(response => {
            // Check if the response is OK (status code 200)
            if (!response.ok) {
                throw new Error('Failed to fetch data');
            }
            return response.json();
        })
        .then(data => {
            console.log(data); // Log the data for debugging purposes

            // Check if the necessary data exists before displaying it
            if (data.spf && data.spf.status) {
                document.getElementById("status").textContent = data.spf.status || "Unavailable";
                document.getElementById("mail_from").textContent = data.spf.mail_from || "Unavailable";
                document.getElementById("authorized").textContent = data.spf.authorized || "Unavailable";
                document.getElementById("comment").textContent = data.spf.comment || "Unavailable";
            }

            if (data.dkim && data.dkim.status) {
                document.getElementById("dkim_status").textContent = data.dkim.status || "Unavailable";
                document.getElementById("dkim_domain").textContent = data.dkim.signing_domain || "Unavailable";
                document.getElementById("dkim_integrity").textContent = data.dkim.header_integrity || "Unavailable";
                document.getElementById("dkim_comment").textContent = data.dkim.comment || "Unavailable";
            }

            if (data.dmarc && data.dmarc.status) {
                document.getElementById("dmarc_status").textContent = data.dmarc.status || "Unavailable";
                document.getElementById("policy").textContent = data.dmarc.policy || "Unavailable";
                document.getElementById("alignment").textContent = data.dmarc.alignment || "Unavailable";
                document.getElementById("dmarc_comment").textContent = data.dmarc.comment || "Unavailable";
            }
        })
        .catch(error => {
            console.error("Error:", error);
            alert("An error occurred while fetching SPF, DMARC, or DKIM data. Please try again.");
        });
});

    </script>

    <footer class="footer" id="footer">
        <div class="container">
            <div class="footer_section_1">
                <div class="icon_and_text">
                    <a href=""><img class="img_1" src="./img/Logo (1).svg" alt=""></a>
                    <a href="">
                        <h2 class="text_h2_section_1">Phirus</h2>
                    </a>
                </div>                 <p class="p_section_1">Copyright © 2024 Phirus.</p>
                <span class="span_section_1">All rights reserved</span>
                <div class="icon_three_section_1">
                    <a href=""><img class="img_2" src="./img/Social Icons.svg" alt="Instagram"></a>
                    <a href=""><img class="img_3" src="./img/Icons2.svg" alt="Twitter"></a>
                    <a href=""><img class="img_4" src="./img/Icons3.svg" alt="Youtube"></a>
                </div>
            </div>
            <div class="container_three">
                <div class="footer_section_2">
                    <h2 class="text_h2_section_2">Company</h2>
                    <ul>
                        <li><a href="">About us</a></li>
                        <li><a href="">Blog</a></li>
                        <li><a href="">Contact us</a></li>
                        <li><a href="">Pricing</a></li>
                        <li><a href="">Testimonials</a></li>
                    </ul>
                </div>

                <div class="footer_section_3">
                    <h2 class="text_h2_section_3">Support</h2>
                    <ul>
                        <li><a href="">Help center</a></li>
                        <li><a href="">Terms of service</a></li>
                        <li><a href="">Legal</a></li>
                        <li><a href="">Privacy policy</a></li>
                        <li><a href="">Status</a></li>
                    </ul>
                </div>
                <div class="footer_section_4">
                    <h2 class="text_h2_section_4">Stay up to date</h2>
                    <form class="subscribe_form">
                        <input type="email" placeholder="Your email address" required>
                        <button type="submit"><img src="./img/0.svg" alt=""></button>
                    </form>

                </div>

            </div>

        </div>

    </footer>

</body>

</html>